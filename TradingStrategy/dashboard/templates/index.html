<!-- dashboard/templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Strategy Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container-fluid">
        <header class="mb-4">
            <h1 class="mt-3">Trading Strategy Dashboard</h1>
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <button id="connectButton" class="btn btn-primary">Connect to Interactive Brokers</button>
                    <span id="connectionStatus" class="ms-3 badge bg-danger">Not Connected</span>
                </div>
                <div class="input-group w-25">
                    <input type="text" id="stockSymbol" class="form-control" placeholder="Stock Symbol">
                    <button id="addStockButton" class="btn btn-success">Add Stock</button>
                </div>
            </div>
        </header>

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="conditions-tab" data-bs-toggle="tab" data-bs-target="#conditions" type="button" role="tab" aria-controls="conditions" aria-selected="true">Stock Conditions</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="patterns-tab" data-bs-toggle="tab" data-bs-target="#patterns" type="button" role="tab" aria-controls="patterns" aria-selected="false">Pattern Detection</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="trades-tab" data-bs-toggle="tab" data-bs-target="#trades" type="button" role="tab" aria-controls="trades" aria-selected="false">Active Trades</button>
            </li>
        </ul>

        <div class="tab-content" id="myTabContent">
            <!-- Conditions Tab -->
            <div class="tab-pane fade show active" id="conditions" role="tabpanel" aria-labelledby="conditions-tab">
                <div class="table-responsive mt-3">
                    <table class="table table-striped table-hover" id="conditionsTable">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Price ($2-$20)</th>
                                <th>Gap Up (>10%)</th>
                                <th>Rel. Volume (>5x)</th>
                                <th>News</th>
                                <th>Float (<10M)</th>
                                <th>Status</th>
                                <th>Price</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Stocks will be added here dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Patterns Tab -->
            <div class="tab-pane fade" id="patterns" role="tabpanel" aria-labelledby="patterns-tab">
                <div class="row mt-3">
                    <div class="col-md-12">
                        <h3>Detected Patterns</h3>
                        <div id="patternsContainer">
                            <!-- Patterns will be added here dynamically -->
                            <div class="alert alert-info">No patterns detected yet</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Trades Tab -->
            <div class="tab-pane fade" id="trades" role="tabpanel" aria-labelledby="trades-tab">
                <div class="row mt-3">
                    <div class="col-md-12">
                        <h3>Active Trades</h3>
                        <div id="tradesContainer">
                            <!-- Trades will be added here dynamically -->
                            <div class="alert alert-info">No active trades</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>